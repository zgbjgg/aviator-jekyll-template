<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" >

		<link rel="stylesheet" href="css/style.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<script src="js/main.js"></script>
		<!-- Begin Jekyll SEO tag v2.1.0 -->
<title>API Docs - Aviator</title>
<meta property="og:title" content="API Docs" />
<meta name="description" content="Jekyll template for API documentation." />
<meta property="og:description" content="Jekyll template for API documentation." />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:site_name" content="Aviator" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "WebSite",
"name": "Aviator",
"headline": "API Docs",
"description": "Jekyll template for API documentation.",
"url": "http://localhost:4000/"}</script>
<!-- End Jekyll SEO tag -->


		
	</head>
	<body>
		<header>
			<h1>
				<a href="/"></a>
				<button type="button" class="open-nav" id="open-nav"></button>
			</h1>

			<form action="/search/" method="get">
				<input type="text" name="q" id="search-input" placeholder="Search">
				<input type="submit" value="Search" style="display: none;">
			</form>

			<div id="sidebar" class="sidebar">
	
	
		
	
		
			<section>
				<h6>Documentation</h6>
				<ul>
					
					
						<li>
							<a href="#documentationgetting_started">
								Getting Started
								
							</a>
						</li>
					
						<li>
							<a href="#documentationhow_it_works">
								How it works?
								
							</a>
						</li>
					
						<li>
							<a href="#documentationhql">
								HQL
								
							</a>
						</li>
					
						<li>
							<a href="#documentationnpo">
								Nested Procedure Operations
								
							</a>
						</li>
					
						<li>
							<a href="#documentationgeospatial">
								GeoSpatial - Search points using GPS
								
							</a>
						</li>
					
						<li>
							<a href="#documentationschemas">
								Schemas
								
							</a>
						</li>
					
				</ul>
			</section>
		
	
		
			<section>
				<h6>APIs</h6>
				<ul>
					
					
						<li>
							<a href="#apiobjects_add">
								/user
								<span class="endpoint post"></span>
							</a>
						</li>
					
				</ul>
			</section>
		
	
</div>


			<p class="copyright">
				<a href="https://cloudcannon.com/">
					Template by CloudCannon
				</a>
			</p>
		</header>
		<div class="main">
			

	
	

	
	
		<section class="doc-content">
			<section class="left-docs">
				<h3>
					<a id="documentationgetting_started">
						Getting Started
						
					</a>
				</h3>
				

				<p><img src="images/logo.png" alt="alt text" /></p>

<h4 id="what-is-hurakann"><em>What is <strong>Hurakann</strong>?</em></h4>

<p><strong>Hurakann</strong> is a computing distributed, decentralized, concurrent and lightweight software platform for building private or public applications in the cloud. <strong>Hurakann</strong> was built on the following premises:</p>

<ul>
  <li><strong>Concurrent:</strong> Support unlimited concurrent connections without side effects in performance.</li>
  <li><strong>Massive Data Processing:</strong> Store unlimited amounts of information of objects and keep high performance.</li>
  <li><strong>Scalability:</strong> Increase the capacity for process requests and storage adding nodes to a cluster as needed, adjusting automatically for higher performance.</li>
  <li><strong>Dynamical:</strong> Store, fetch, update or delete information as needed, using API’s or SDK’s.</li>
  <li><strong>Availability:</strong> Store, replicate and synchronize data between a collection of nodes, making it <strong>“clusterizable”</strong></li>
  <li><strong>No-downtime:</strong> Even updating any resource, always run in <strong>“mode on”</strong> in a transparent layer.</li>
</ul>

<h4 id="motivation"><strong><em>Motivation</em></strong></h4>

<p>Actually building an application (mobile, web, desktop) could be a tedious, large and slow task because developers need:</p>

<ul>
  <li>A cloud server hardware to mount the back-end.</li>
  <li>To develop the back-end for data access.</li>
  <li>To design the database or how the data is structured.</li>
</ul>

<p>Then, integration with the back-end side becomes a bottleneck in the development plan. <strong>Hurakann</strong> solves the problem providing a dynamic API to store, fetch, update and delete data that any application uses.</p>

<h4 id="managing-users-objects-and-entities-come-on-iot-internet-of-things"><strong><em>Managing users, objects and entities, “come on IoT (Internet of Things)!”</em></strong></h4>

<p>In real world almost every application require managing USERS, like register, manage profiles, login, relationships and the integration with the newly called IoT (Internet of Things), so each user, object or entity could be linked to devices, actions or specific features, or a USER can be considered an ENTITY, and ARTEFACT or a THING.</p>

<p><strong>Hurakann</strong> is able to manage all actions related to a single USER so adding functionality, integrating other applications and adding iterations to such USER translates in lowering development time and cost savings.</p>

<p>All applications are built in a <strong>“static”</strong> way so when something requires to be integrated or something requires to be added, the task becomes really complicated and time consuming.</p>

<p><strong>Hurakann</strong> provides a dynamic access to objects or actions so they may be changed in versatile ways. The platform is able to grow up on data volume and design on the fly without side effects in performance. At this point <strong>Hurakann</strong> becomes a dynamic database for any application using native code.</p>

<h4 id="api---your-database-in-the-cloud-simple-and-intelligible"><strong><em>API - your database in the cloud simple and intelligible</em></strong></h4>

<p><strong>Hurakann</strong> exposes the access to data stored in the database via RESTful services called API.</p>

<p>API is the collection of RESTful services that is designed for specific actions over your stored objects. The API uses single resources allocated in the private or public clouds using a standard data formatting like JSON or XML.</p>

<p>Any application looking for integration with <strong>Hurakann</strong> simply could access the platform through the API, using http protocol and following the correct structured file formats for each service.</p>

<h4 id="sdk---jumping-to-implementation-dont-worry-about-the-black-side"><strong><em>SDK - jumping to implementation, don’t worry about the black side</em></strong></h4>

<p>When an application is built with <strong>Hurakann</strong>, developers don’t have to worry about how data is structured and accessed. However, in most cases, developers don’t want to learn or become related to work with integration protocols, file formats, encode and decode data, and collect things that could become a <strong>“headache”</strong>.</p>

<p>At this point using <strong>Hurakann</strong> API could produce a backlog in development time and slow down integration, because developers don’t know things such as: parse a file format, access to data parsed, send http requests, read responses, and other related things based on working with API’s.</p>

<p>In response to that, <strong>Hurakann</strong> provides a native integration for managing objects and actions, using a native programming language that developers are able to use for integration.  Languages sucha as java, object C or javascript.</p>

<p>And that is something called <strong>“SDK”</strong> (Software Development Kit). The SDK is designed for each language to bind better with integration so <strong>Hurakann</strong> SDK is faster and easier to use than the <strong>Hurakann</strong> API.</p>

<p><em><strong>Hurakann</strong> SDK provides a native way for a language to consume an API and guarantee developers not to spend extra time in integration and testing.</em></p>

			</section>
		</section>
	
		<section class="doc-content">
			<section class="left-docs">
				<h3>
					<a id="documentationhow_it_works">
						How it works?
						
					</a>
				</h3>
				

				<h4 id="cluster-nodes"><strong><em>Cluster (Nodes)</em></strong></h4>

<p><strong>Hurakan</strong> is designed for distributed computing, what it means is that the system runs over <code class="highlighter-rouge">"nodes"</code>.</p>

<p><strong>Hurakann</strong> is written in Erlang taking advantage of concurrency, native lightweight processes and availability.</p>

<p>Each node in <strong>Hurakann</strong> is a set of tools of a package, ready for building a cluster.</p>

<p><strong>Hurakann</strong> is designed so that each node in the cluster balances the incoming requests among nodes avoiding that one member processes all. Each node in the cluster is an identical copy of other members so that all incoming requests are able to be processed by all members.</p>

<p><strong>Hurakann</strong> uses primitive remote procedure calls (RPC) to balance the load of requests among nodes, so that a node receiving the request lookup for a <code class="highlighter-rouge">"free node of load"</code> or for a <code class="highlighter-rouge">"node with less load"</code> in the cluster and passes the request for processing.</p>

<p>One node could be of type:</p>

<ul>
  <li>
    <p><code class="highlighter-rouge">Neighbor:</code>  the node is a worker in a cluster, and only processes required requests.  It is like an extension in the cluster.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">Root:</code>  the node works as <code class="highlighter-rouge">"main"</code>, controlling neighbor nodes and balancing requests among them. This node type has a special feature: if it is disconnected from a cloud node then it will keep changes on the database for synced when it detects a connection. This node type is intended to work as an <code class="highlighter-rouge">"offline"</code> node, and the synced could be set as: enabled or disabled at any time. When a connection is detected the root node could handoff all data in the cloud to sync up the database, using vclocks.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">Cloud:</code> the node is in the cloud and could have root nodes connected. The node is responsible for keeping all set of data of all root nodes connected or simply work as a “root” node but in the cloud. Root nodes could be added, as you need them at any time.</p>
  </li>
</ul>

<h4 id="vnodes"><strong><em>Vnodes</em></strong></h4>

<p><code class="highlighter-rouge">Vnode</code> (Virtual Node) is a term used for describing virtual unique processes into a node, each virtual node is responsible for treating data, logging transactions and ensure atomicity and consistency of data. The <code class="highlighter-rouge">vnode</code> is a temporal process that lives while the processing of data is taking place.</p>

<p>A <code class="highlighter-rouge">vnode</code> starts when incoming a request (from client) and it keeps alive while the request is processed, stops when the process of data has finished (commonly when client receive response). A <code class="highlighter-rouge">vnode</code> uses <code class="highlighter-rouge">last write wins</code> so for example if two or more request collide in the system at the same time, the last of them writting, updating or deleting data will win and this will be the final data preserved into the backend database.</p>

<p><code class="highlighter-rouge">Vnodes</code> are built with 3 processes linked, each process is responsible for a specific task into the <code class="highlighter-rouge">vnode</code>, they are:</p>

<ul>
  <li>Worker</li>
  <li>Tracer</li>
  <li>Transactor</li>
</ul>

<p>A <code class="highlighter-rouge">worker</code> process executes the <code class="highlighter-rouge">dirty work</code> in the <code class="highlighter-rouge">vnode</code>, so the <code class="highlighter-rouge">worker</code> process and validate the data flow ensuring the consistency in the data when writting, deleting or updating in the backend database, so in more simple words the <code class="highlighter-rouge">worker</code> execute transaction by transaction (write, update, delete, fetch) in the backend database.</p>

<p>A <code class="highlighter-rouge">tracer</code> process looks each transaction executed by the <code class="highlighter-rouge">worker</code>, so the <code class="highlighter-rouge">tracer</code> knows which one data is being modified at time, in others words the <code class="highlighter-rouge">tracer</code> is logging each transaction (write, update, delete, fetch) in the database backend.</p>

<p>A <code class="highlighter-rouge">transactor</code> process saves the log of data that the <code class="highlighter-rouge">tracer</code> is looking and is <code class="highlighter-rouge">'supervising'</code> to the <code class="highlighter-rouge">worker</code> so if the <code class="highlighter-rouge">worker</code> finish the <code class="highlighter-rouge">transactor</code> can determinate if it terminates with a <code class="highlighter-rouge">success</code> or <code class="highlighter-rouge">failure</code>. If the <code class="highlighter-rouge">worker</code> (for any reason) terminates in a <code class="highlighter-rouge">success</code> state the <code class="highlighter-rouge">transactor</code> can commit all data to the database backend, otherwise if the <code class="highlighter-rouge">worker</code> (for failure reasons) terminates (or abort) in a <code class="highlighter-rouge">failure</code> state the <code class="highlighter-rouge">transactor</code> can rollback all data to the database backend to a previous state and keeps the entire database in a state before executes the client request.</p>

<h4 id="plugins-or-addons"><strong><em>Plugins or addons</em></strong></h4>

<p>Plugins or addons is a special feature to allow adding modules, workers or applications into <strong>Hurakann</strong> node, and becomes an extension arm of the system.</p>

<p>Plugins allow <strong>Hurakann</strong> to process specific tasks on the node, replicating all behaviour in the cluster. For example if you need to process incoming messages on a specific port and format, a nicely protocol implementation for a specific message, generating random data can be created with plugins.</p>

<p>Plugins must be written in erlang and they are managed by <strong>Hurakann</strong>.</p>

<h4 id="security-concerns"><strong><em>Security Concerns</em></strong></h4>

<p><code class="highlighter-rouge">Ckey</code> (Client Key Token) is an id to access the API, so it’s is used as an auth method against the black-box side, is an unique and unrepeatable value for each segment in the database. This token joined to another certificates in the core system ensures that all data are encrypted and stored in a specific segment of the database isolated from others, so only <code class="highlighter-rouge">vnodes</code> that are certificates to use the <code class="highlighter-rouge">ckey</code> can access data in the database. Ckey must be send in the Headers of each request in order to retrieve or push data. The certificates (including ckey) are created at the first time using the <code class="highlighter-rouge">CLI</code> and provided to the client.</p>

			</section>
		</section>
	
		<section class="doc-content">
			<section class="left-docs">
				<h3>
					<a id="documentationhql">
						HQL
						
					</a>
				</h3>
				

				<p>With HQL you can query (search) over your stored and indexed objects into your database segment.
HQL has many features to satisfy the most common search cases in a common system. HQL is inspired and based in <code class="highlighter-rouge">Solr</code> queries but with a powerful model that has many differences from the original.</p>

<p>In difference to other QL (Query Languages), HQL uses a specific syntax and commands to retrieve data.
Hurakann can interpret your query from a single line of code as in SQL SELECT, 
but without specifiying the SELECT and FROM on the same query, just over your entity.</p>

<p>In the last version of HQL you must provide the <code class="highlighter-rouge">datatype</code> to each field in the query, so, if you save your object with some field as int, boolean or string, just provide that info to the query:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">WHERE</span> <span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">Allison</span> <span class="k">AND</span> <span class="n">years</span><span class="p">:</span><span class="n">i</span><span class="o">=</span><span class="mi">40</span> 
</code></pre>
</div>

<p>The datatype must be after <code class="highlighter-rouge">':'</code>. The supported datatypes are:</p>

<table>
  <thead>
    <tr>
      <th>Prefix</th>
      <th>Datatype</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>i</td>
      <td>integer</td>
    </tr>
    <tr>
      <td>s</td>
      <td>string</td>
    </tr>
    <tr>
      <td>b</td>
      <td>boolean</td>
    </tr>
    <tr>
      <td>f</td>
      <td>float</td>
    </tr>
    <tr>
      <td>dt</td>
      <td>date</td>
    </tr>
  </tbody>
</table>

<p class="info"><em>date</em> type must be in format <strong>ISO 8601</strong></p>

<p>Let’s do it!</p>

<h4 id="simple-querying"><strong><em>Simple Querying</em></strong></h4>

<p>For example, in our database we saved our object whit name, lastname and also a custom parameters called _box_id, _years and _company_id, then our object looks like this:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"Allison"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"lastname"</span><span class="p">:</span><span class="s2">"Mosshart"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_box_id"</span><span class="p">:</span><span class="s2">"1AB456"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_years"</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_company_id"</span><span class="p">:</span><span class="s2">"1abcb718ajcnakaks819"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Now, how we can search all objects with ‘Allison’ in the field name?, simple, in the search API use HQL:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">WHERE</span> <span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">Allison</span>
</code></pre>
</div>

<p>HQL uses AND, OR, NOT condition to satisfy logic operators, for example, search the objects with name ‘Allison’
or with name ‘Jack’ but NOT name ‘Meg’:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">WHERE</span> <span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">Allison</span> <span class="k">OR</span> <span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">Jack</span> <span class="k">NOT</span> <span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">Meg</span>
</code></pre>
</div>

<h4 id="wildcard"><strong><em>Wildcard</em></strong></h4>

<p>You can use the wildcard * to match everything after or before a string comparison, example, search the objects that name starts with ‘Jac’ like ‘Jack’, ‘Jackie’:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">WHERE</span> <span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">Jac</span><span class="o">*</span>
</code></pre>
</div>

<h4 id="ranges"><strong><em>Ranges</em></strong></h4>

<p>You can use ranges on fields that are numeric fields, for example, search the objects with years mayor than 30 and
minor than 50:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">WHERE</span> <span class="n">years</span><span class="p">:</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">50</span> <span class="k">AND</span> <span class="n">years</span><span class="p">:</span><span class="n">i</span><span class="o">&gt;</span><span class="mi">30</span>
</code></pre>
</div>

<p>Ranges apply for datatypes: <code class="highlighter-rouge">float, integer and date</code>.</p>

<p class="info">Ranges must be set with mayor and minor, for that purpose use wildcard * if one of limits are not provided, example, search years only mayor to 50:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">WHERE</span> <span class="n">years</span><span class="p">:</span><span class="n">i</span><span class="o">&lt;*</span> <span class="k">AND</span> <span class="n">years</span><span class="p">:</span><span class="n">i</span><span class="o">&gt;</span><span class="mi">50</span>
</code></pre>
</div>

<p>#### <strong><em>Time Series</em></strong></p>

<p>In every object stored in the database there are two attributes indexed by default: <code class="highlighter-rouge">inserted_at</code> and <code class="highlighter-rouge">updated_at</code>. The timestamp is useful when you want retrieve objects in a range of time so for example you can query data from the first of this month until today (updated or inserted). In order to execute the query in a successful state the date must be converted to <em>ISO 8601</em>:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">WHERE</span> <span class="n">inserted_at</span><span class="p">:</span><span class="n">dt</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">09</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span> <span class="k">AND</span> <span class="n">inserted_at</span><span class="p">:</span><span class="n">dt</span><span class="o">&lt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="n">Z</span><span class="p">...</span>	
</code></pre>
</div>

<p>If you noticed the date is passed in <strong>ISO 8601</strong> format, so in the example the query will retrieve all objects created between 2017-March-09 and 2017-March-13.</p>

<h4 id="grouping"><strong><em>Grouping</em></strong></h4>

<p>When you perform a complex search maybe grouping data could be useful, example, search the objects with name ‘Allison’ or Jack and box_id that starts with ‘ABC’:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">WHERE</span> <span class="p">(</span><span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">Allison</span> <span class="k">OR</span> <span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">Jack</span><span class="p">)</span> <span class="k">AND</span> <span class="n">box_id</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">ABC</span><span class="o">*</span>
</code></pre>
</div>

<p>Grouped data are enclosed into parentheses ( ). HQL only allows one group at time, no group into group</p>

<h4 id="included-fields"><strong><em>Included Fields</em></strong></h4>

<p>Included fields is a feature of HQL to retrieve specific fields of a object in a search, example, search the objects with name ‘Allison’ and include on each result the years:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">WHERE</span> <span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">Allison</span> <span class="n">INCLUDE</span> <span class="n">years</span>
</code></pre>
</div>

<p class="info">For more included fields, just separate with ‘,’ delimiter</p>

<h4 id="parent-fields"><strong><em>Parent Fields</em></strong></h4>

<p>When you create your object, any of your custom fields could have an id of another object inside (like a link), then in your search you want to know the parent object fields, example, search the objects with name ‘Allison’ and include on each result the years, also retrieve the name of the company that belongs the object:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">WHERE</span> <span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">Allison</span> <span class="n">INCLUDE</span> <span class="n">years</span> <span class="n">PARENT_FIELDS</span> <span class="n">company_id</span>
</code></pre>
</div>

<p class="info">For more parent fields, just separate with ‘,’ delimiter</p>

<p class="error">HQL just retrieve parent fields from the actual object, just for one level</p>

<p>Then on each object you can extract the tag ‘company_id_obj’ that is the object representing the company,
similar to make a GET request. To extract the PARENT_FIELDS result from each object just concat to your field the prefix ‘obj’, so in the example we set PARENT_FIELDS with company_id, then extract company_id_obj</p>

<h4 id="sorting"><strong><em>Sorting</em></strong></h4>

<p>With HQL you can sort your query results in ascendent or descendent form. To use this just use SORT_BY_ASC (for ascendent) or SORT_BY_DESC (for descendent) and the field that you want sort by, example, search the objects where name starts with Jac and then sort by name in ascendent form:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">WHERE</span> <span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">Jac</span><span class="o">*</span> <span class="n">SORT_BY_ASC</span> <span class="n">name_s</span>
</code></pre>
</div>

<p class="info">You must set a valid field to sort by, the field must follow by the type of it, for example if your field is string, then: name_s, if it’s integer: name_i or if it’s boolean: name_b.</p>

<h4 id="as-link"><strong><em>AS LINK</em></strong></h4>

<p>The new version of HQL now support the <code class="highlighter-rouge">LINK</code> operation and it’s very simple to use, since it works like a <code class="highlighter-rouge">JOIN</code> in SQL systems. The <code class="highlighter-rouge">LINK</code> operation can be used when you want query your objects with a relationship between them in only one query (in one sentence), so for example, this allows you query data from different objects and link them to generate only one output.</p>

<p>Example: imagine a system that a user can publish posts (in a blog), then each post is a single object in the database and the users publishing are other objects in the same system, then, how we can query the posts from the user with the nickname equals to <code class="highlighter-rouge">almoss</code>?, simple, use <code class="highlighter-rouge">LINK</code>:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">WHERE</span> <span class="n">nickname</span><span class="o">=</span><span class="n">almoss</span> <span class="k">AS</span> <span class="k">user</span> <span class="n">LINK</span> <span class="n">entity</span><span class="o">=</span><span class="n">post</span> <span class="k">AND</span> <span class="k">owner</span><span class="o">=</span><span class="k">user</span><span class="p">.</span><span class="n">id</span> <span class="n">INCLUDE</span> <span class="n">favs</span><span class="p">,</span><span class="n">text</span>
</code></pre>
</div>

<p>Explaining the query: HQL evaluates the first query that is: <strong><code class="highlighter-rouge">nickname=almoss</code></strong>, then retrieve objects from database where the condition is true, so the result of this query is stored in a variable called <code class="highlighter-rouge">user</code>, and linked to another query searching the objects where entity equals to <code class="highlighter-rouge">post</code> and owner equals to id of the variable <code class="highlighter-rouge">user</code>.</p>

<p>The <code class="highlighter-rouge">id</code> in the alias is the id of the objects (when saving post, each of them have an owner attribute with the id of the user), but however you can use the attributes of the objects queried and assigned to the alias, for example, if our user has an attribute <code class="highlighter-rouge">age</code>, then we can use <code class="highlighter-rouge">user.age</code> to insert the value of the attribute using the alias.</p>

<p class="info">The alias always have an attribute id that is the id of the object in the system.</p>

<h4 id="regular-expressions"><strong><em>Regular Expressions</em></strong></h4>

<p>As in <code class="highlighter-rouge">solr v4</code> the <code class="highlighter-rouge">HQL</code> supports regular expressions in queries, only in string fields, for example:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">WHERE</span> <span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=/</span><span class="p">.</span><span class="o">*</span><span class="p">[</span><span class="n">Mm</span><span class="p">]</span><span class="n">egan</span><span class="p">.</span><span class="o">*/</span>
</code></pre>
</div>

<p>The above query will search over objects where the string <code class="highlighter-rouge">Megan</code> or <code class="highlighter-rouge">megan</code> is present somewhere in the field.
If you need more info about how to use and examples how to use regular expression consult <a href="http://www.openjems.com/solr-regex-tutorial/">this tutorial</a>.</p>

<h4 id="hql-bifs-built-in-functions"><strong><em>HQL BIFs (built-in functions)</em></strong></h4>

<p>HQL also supports a feature called <code class="highlighter-rouge">BIFs</code> that is a built-in functions in the backend system, the built-in functions need a function declared over a field followed by a query and returns a single response instead many records as the common searches. The next are the <code class="highlighter-rouge">BIFs</code> supported for now:</p>

<table>
  <thead>
    <tr>
      <th>BIF</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>MAX</td>
      <td>Returns the max value of a rows</td>
    </tr>
    <tr>
      <td>MIN</td>
      <td>Returns the min value of a rows</td>
    </tr>
    <tr>
      <td>AVG</td>
      <td>Returns the average of a rows (for a field)</td>
    </tr>
    <tr>
      <td>SUM</td>
      <td>Returns the sum of a rows (for a field)</td>
    </tr>
  </tbody>
</table>

<p>For example, let’s say we want to know the total likes of all user’s posts, then to perform that we must use the <code class="highlighter-rouge">SUM</code> BIF:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">SUM</span> <span class="n">likes</span><span class="p">:</span><span class="n">i</span> <span class="k">WHERE</span> <span class="n">entity</span><span class="o">=</span><span class="n">post</span> <span class="k">AND</span> <span class="n">nickname</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">Allison</span>
</code></pre>
</div>

<p>The above query could return the sum of all likes: <code class="highlighter-rouge">json {"sum": 5004}</code></p>

<p>Another good example could be if we want to know the age of the older employee and the average of all ages of all employees:</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">MAX</span> <span class="n">years</span><span class="p">:</span><span class="n">i</span> <span class="k">WHERE</span> <span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=*</span> <span class="k">AND</span> <span class="k">type</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">employee</span>
</code></pre>
</div>
<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="k">AVG</span> <span class="n">years</span><span class="p">:</span><span class="n">i</span> <span class="k">WHERE</span> <span class="n">name</span><span class="p">:</span><span class="n">s</span><span class="o">=*</span> <span class="k">AND</span> <span class="k">type</span><span class="p">:</span><span class="n">s</span><span class="o">=</span><span class="n">employee</span>
</code></pre>
</div>
<p>The result of each BIF is a single json with one attribute, containing the name of the BIF as key and the value will be the numeric result. Each BIF must be sent with a single field and the field must contains the prefix for datataype.</p>

<h4 id="restrictions"><strong><em>Restrictions</em></strong></h4>

<ul>
  <li>A query could start with reserved words for a <code class="highlighter-rouge">BIF</code>: <code class="highlighter-rouge">MAX</code>, <code class="highlighter-rouge">MIN</code>, <code class="highlighter-rouge">AVG</code>, <code class="highlighter-rouge">SUM</code></li>
  <li>A query could start with reserved word <code class="highlighter-rouge">WHERE</code></li>
  <li>In a query, if not provide sort field, default is set to <code class="highlighter-rouge">name</code></li>
  <li>All fields must contains datatype, if not provided then <code class="highlighter-rouge">s</code> is used.</li>
  <li>Conditions must be separated by spaces</li>
  <li><code class="highlighter-rouge">OR</code>, <code class="highlighter-rouge">AND</code>, <code class="highlighter-rouge">NOT</code> are reserved words and must be used in uppercase</li>
  <li><code class="highlighter-rouge">PARENT_FIELDS</code> and <code class="highlighter-rouge">INCLUDE</code> are reserved words and must be used in uppercase</li>
  <li>For many fields on <code class="highlighter-rouge">INCLUDE</code> or <code class="highlighter-rouge">PARENT_FIELDS</code> use comma as delimiter</li>
  <li>For <code class="highlighter-rouge">SORT_BY_DESC</code> and <code class="highlighter-rouge">SORT_BY_ASC</code> field must have a prefix of data type</li>
  <li>For <code class="highlighter-rouge">AS _ LINK</code> the sentence must start with <code class="highlighter-rouge">AS</code>, after a var and finish with a <code class="highlighter-rouge">LINK</code>, then other query</li>
  <li>Allowed operators are: <code class="highlighter-rouge">=</code>, <code class="highlighter-rouge">&gt;</code>, <code class="highlighter-rouge">&lt;</code>, <code class="highlighter-rouge">&lt;=</code>, <code class="highlighter-rouge">&gt;=</code></li>
</ul>

			</section>
		</section>
	
		<section class="doc-content">
			<section class="left-docs">
				<h3>
					<a id="documentationnpo">
						Nested Procedure Operations
						
					</a>
				</h3>
				

				<p>Nested Procedure Operations (N.P.O) allows executing many operations in a row <code class="highlighter-rouge">step-by-step</code>, so you won’t deal with callbacks from your app. This method avoid inconsistence in data, for example, if you get an object and use the info to update another using your app, maybe external factors such as network connection issues or even programming validations could affect data if some of operations fail before executing the others.</p>

<p>Hurakann creates a single process to keep the order of steps and execute one by one, if some fails, then the entire operation is applied as <code class="highlighter-rouge">rollback</code>, otherwise <code class="highlighter-rouge">commit</code> the transaction.</p>

<p>The N.P.O works using a single interface (API Restful) with a JSON format, and the steps are described based on the web-services in Hurakann API, even you can use a nested procedure into another nested procedure!.</p>

<h4 id="features"><strong><em>Features</em></strong></h4>

<ul>
  <li>Many operations in a row <code class="highlighter-rouge">step-by-step</code></li>
  <li>Dynamical data injection using <code class="highlighter-rouge">jsonpath</code></li>
</ul>

<h4 id="how-it-works"><strong><em>How it works?</em></strong></h4>

<p>You must define the steps in your procedure, and then model into the JSON request using the <code class="highlighter-rouge">/nested/procedures</code> endpoint, for example, let’s say, we want get an object from the database and then create another object so then a relantionship will be created</p>

<p>First we need to know which one web-service is used for getting info of an object:</p>

<table>
  <thead>
    <tr>
      <th>URI</th>
      <th>Method</th>
      <th>Inject</th>
      <th>Request</th>
      <th>Next Phase</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>user</td>
      <td>GET</td>
      <td><code class="highlighter-rouge">[ {"from": "name", "to": "_parent_name"} ]</code></td>
      <td>String Json</td>
      <td>Skip</td>
    </tr>
  </tbody>
</table>

<p>Now we have our first step, this will look like this:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"inject"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w"> </span><span class="nt">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"_parent_name"</span><span class="p">}],</span><span class="w">
  </span><span class="nt">"request"</span><span class="p">:</span><span class="s2">"{\"user_id\":\"id\",\"branch_id\":\"bid\",\"phase\":\"phase1\"}"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Now we must design the next step, and in this case the next step use the result of the first step searching the jsonpath equals to <code class="highlighter-rouge">name</code> and inject in a new attribute of the newly created object using again a jsonpath this time equals to <code class="highlighter-rouge">_parent_name</code>, so our next step looks like this:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"request"</span><span class="p">:</span><span class="s2">"{
    \"branch_id\":\"bid\",
    \"coloruser\":\"black\",
    \"name\":\"John\",
    \"phase\":\"phase1\",
    \"user_id\":\"id\",
    \"profile_id\":\"pid\",
    \"_parent_name\":\"_\"
  }"</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>if you noticed, the final element of the request is a <code class="highlighter-rouge">_parent_name</code>, with this in the <code class="highlighter-rouge">to</code> (inject) we are indicating to the N.P.O that inject the value returned by the first step in this field.</p>

<p>Now putting all together:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"inject"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nt">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w"> </span><span class="nt">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"_parent_name"</span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{
    \"user_id\":\"id\",
    \"branch_id\":\"bid\",
    \"phase\":\"phase1\"
  }"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{
      \"branch_id\":\"bid\",
      \"coloruser\":\"black\",
      \"name\":\"John\",
      \"phase\":\"phase1\",
      \"user_id\":\"id\",
      \"profile_id\":\"pid\",
      \"_parent_name\":\"_\"
    }"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Cool!, now we dont worry about data inconsistence, since all operations all managed by Hurakann and we just use one request to do that!.</p>

<h4 id="lexical-rules"><strong><em>Lexical Rules</em></strong></h4>

<ul>
  <li>The uri is the original URI in the API Restful, but without versioning and if the uri contains more than once slash (<code class="highlighter-rouge">/</code>), replace this with dot (<code class="highlighter-rouge">.</code>).</li>
  <li>The Method is the method used by the URI, always must be in uppercase.</li>
  <li>Inject is an array of objects (from, to) with a <code class="highlighter-rouge">jsonpath</code> of data result, so the jsonpath is evaluated to get the value to send in next step (taken from the result of the actual step). The <code class="highlighter-rouge">from</code> argument represent the value to search (using jsonpath) in the response of the step. The <code class="highlighter-rouge">to</code> argument represent the path to replace (using jsonpath) with the new value.</li>
  <li>In the injection of a value, set <code class="highlighter-rouge">_</code> as the value of the attribute to replace.</li>
  <li>Request is a JSON STRINGIFY of the request body or query-string (if GET Method)</li>
  <li>Next is an object containing the next step, again uri, method, inject, request, and other next step (if any).</li>
</ul>

<h4 id="jsonpath"><strong><em>JsonPath</em></strong></h4>

<p><code class="highlighter-rouge">JsonPath</code> is very similar to the <code class="highlighter-rouge">XPath</code> in <code class="highlighter-rouge">Xml</code>, so we use that for a common format of injection data.
If you need more info about how <code class="highlighter-rouge">JSONPATH</code> works <a href="http://goessner.net/articles/JsonPath/">click here</a></p>

<p>You can found the doc for the API <a href="http://docs.hoverapi.apiary.io/#reference/nestedprocedures">here</a></p>


			</section>
		</section>
	
		<section class="doc-content">
			<section class="left-docs">
				<h3>
					<a id="documentationgeospatial">
						GeoSpatial - Search points using GPS
						
					</a>
				</h3>
				

				<p>GeoSpatial allows you store (index) and update <code class="highlighter-rouge">"locations"</code> in your database segment to use for searching and calculating distances from locations stored to a single given point.</p>

<p>Imagine that you want implement a system to geo-referencing your users (for example, retail or proximity cases), so when some of your users (using a device), provide their location (latitude and longitude) and then you perform a search into your database to search the nearest location (previously registered) and The Hover answers with a resultset with that locations.</p>

<h4 id="use-case"><strong><em>Use case</em></strong></h4>

<p>For example, we saved this locations in our database using the API <code class="highlighter-rouge">geospatial</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	Location Store One: 18.956952,-99.2315226
	Location Store Two: 18.9613766,-99.2344753
	Location Store Three: 18.63222,-99.1615037
</code></pre>
</div>

<p>Now one of our users provide his location with a point nearest of the location <code class="highlighter-rouge">Location Store One</code> then, sending that with the <code class="highlighter-rouge">geospatial GET</code> you should receive a resultset, ordered from the location nearest:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"geos"</span><span class="p">:</span><span class="w">
  </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="nt">"km"</span><span class="p">:</span><span class="mf">0.13275527391449998</span><span class="p">,</span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"IDLOCONE"</span><span class="p">,</span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"Location Store One"</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="nt">"km"</span><span class="p">:</span><span class="mf">0.4584615115187</span><span class="p">,</span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"IDLOCTWO"</span><span class="p">,</span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"Location Store Two"</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="nt">"km"</span><span class="p">:</span><span class="mf">36.955166644128</span><span class="p">,</span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"IDLOCTHREE"</span><span class="p">,</span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"Location Store Three"</span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Let’s analyze the results, as you can see, the nearest location is <code class="highlighter-rouge">Location Store One</code> since it is <code class="highlighter-rouge">0.1327</code> Km away, and the other locations are away from the user actual location.</p>

<p>You can found the doc for the API <a href="http://docs.hoverapi.apiary.io/#reference/geospatial">here</a></p>

			</section>
		</section>
	
		<section class="doc-content">
			<section class="left-docs">
				<h3>
					<a id="documentationschemas">
						Schemas
						
					</a>
				</h3>
				

				<p>Schemas are the base to <code class="highlighter-rouge">'mapping'</code> an entity or object into a backend database, similar to create a table structure in SQL systems. The base for an entity or object (the minimal unity) is the attribute or field, each entity or object has many attributes than can be stored into the whole object, the main characteristic is that each attribute is defined with a set of tools that can define its behaviour in the core and backend system.</p>

<p>Schemas are defined with an XML with a specific structure that the core can parse and store, versioning your entity or object.</p>

<p>When the Schema is uploaded it also translates the entity or object to a RESTful API, so the entity or object can be created, updated or fetched with a specific endpoint defined also in the schema, this is useful because a client can connect and implement this methods instead using the <code class="highlighter-rouge">'RAW'</code> API exposed by The Hover and have a plus: all data is passed for a serie of validations, so the consistency of each field or attribute is guaranteed by the core instead of implement outside of the box.</p>

<h4 id="schema-definition"><strong><em>Schema definition</em></strong></h4>

<p>The schema must contain the certificates info of your account, so when using the dynamic endpoint you dont need pass this tedious info.</p>

<p>The certificates must include:</p>

<ul>
  <li>[x] <strong><code class="highlighter-rouge">name</code></strong>: the canonical name of entity or object.</li>
  <li>[x] <strong><code class="highlighter-rouge">version</code></strong>: the version of schema.</li>
  <li>[x] <strong><code class="highlighter-rouge">user_id</code></strong>: the user_id provided along with the certificates.</li>
  <li>[x] <strong><code class="highlighter-rouge">branch_id</code></strong>: the branch_id provided along with the certificates.</li>
  <li>[x] <strong><code class="highlighter-rouge">profile_id</code></strong>: the profile_id provided along with the certificates.</li>
</ul>

<h4 id="attributes"><strong><em>Attributes</em></strong></h4>

<p>Attributes or fields are the minimal unit of an entity or object, and in a schema you can define its behaviour before reach the durability into the backend database.</p>

<p>Each attribute can contain:</p>

<ul>
  <li>[x] <strong><code class="highlighter-rouge">name</code></strong>: the name of your attribute, this define how your attribute is written in backend database, must start with <code class="highlighter-rouge">'_'</code>.</li>
  <li>[x] <strong><code class="highlighter-rouge">required</code></strong>: if attribute is required or not when creating the entity, if not provided <code class="highlighter-rouge">'false'</code> is used.</li>
  <li>[x] <strong><code class="highlighter-rouge">datatype</code></strong>: the datatype of your attribute, the options are: <code class="highlighter-rouge">boolean, integer, float, date or string</code>.</li>
  <li>[x] <strong><code class="highlighter-rouge">indexed</code></strong>: if attribute is searchable using <code class="highlighter-rouge">THQL</code>, default set to false.</li>
  <li>[x] <strong><code class="highlighter-rouge">length</code></strong>: optional, the length of your attribute, must be expressed as an integer value even for integer datatype, if not provided <code class="highlighter-rouge">'unlimited'</code> is used.</li>
  <li>[x] <strong><code class="highlighter-rouge">validation</code></strong>: optional, a valid regex to run against the attribute value before write or update in backend database.</li>
  <li>[x] <strong><code class="highlighter-rouge">default</code></strong>: optional, if the attribute has a default value when not provided.</li>
</ul>

<h4 id="dynamic-endpoint-restful-api"><strong><em>Dynamic Endpoint (RESTful API)</em></strong></h4>

<p>Dynamic Endpoint define how the entity or object can be stored, updated or fetched using the rules declared in the attributes section.</p>

<p>The endpoint must contain:</p>

<ul>
  <li>[x] <strong><code class="highlighter-rouge">uri</code></strong>: the uri to write, update or fetch the entity or object.</li>
  <li>[x] <strong><code class="highlighter-rouge">methods</code></strong>: the methods that can enable the uri, the options are: <code class="highlighter-rouge">POST, PUT, GET</code>.</li>
  <li>[x] <strong><code class="highlighter-rouge">auth</code></strong>: the auth method to the uri, the supported for now are: <code class="highlighter-rouge">oauth2</code> or <code class="highlighter-rouge">none</code>.</li>
</ul>

<h4 id="how-to-use"><strong><em>How to use</em></strong></h4>

<p>First to all, you must define a XML containing: definition, attributes and dynamic endpoint, in this example we are using a schema that defines an entity called <code class="highlighter-rouge">post</code>:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;schema</span> <span class="na">name=</span><span class="s">"post"</span> <span class="na">version=</span><span class="s">"1.5"</span> <span class="na">user_id=</span><span class="s">"YOUR-USER-ID"</span> <span class="na">branch_id=</span><span class="s">"YOUR-BRANCH-ID"</span> <span class="na">profile_id=</span><span class="s">"YOUR-PROFILE-ID"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;attributes&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">datatype=</span><span class="s">"string"</span> <span class="na">name=</span><span class="s">"_title"</span> <span class="na">required=</span><span class="s">"true"</span> <span class="na">length=</span><span class="s">"30"</span> <span class="na">indexed=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">datatype=</span><span class="s">"string"</span> <span class="na">name=</span><span class="s">"_body"</span> <span class="na">required=</span><span class="s">"true"</span> <span class="na">length=</span><span class="s">"140"</span> <span class="na">indexed=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">default=</span><span class="s">"0"</span> <span class="na">datatype=</span><span class="s">"integer"</span> <span class="na">name=</span><span class="s">"_likes"</span> <span class="na">required=</span><span class="s">"true"</span> <span class="na">length=</span><span class="s">"3"</span> <span class="na">indexed=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">datatype=</span><span class="s">"string"</span> <span class="na">name=</span><span class="s">"_date"</span> <span class="na">required=</span><span class="s">"false"</span> <span class="na">length=</span><span class="s">"10"</span> <span class="na">indexed=</span><span class="s">"true"</span> <span class="na">validation=</span><span class="s">"20[1-3][0-9]-[0-1][0-2]-[0-3][0-9]"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/attributes&gt;</span>
  <span class="nt">&lt;endpoint&gt;</span>
    <span class="nt">&lt;uri&gt;</span>/post<span class="nt">&lt;/uri&gt;</span>
    <span class="nt">&lt;methods&gt;</span>POST,PUT,GET<span class="nt">&lt;/methods&gt;</span>
    <span class="nt">&lt;auth&gt;</span>none<span class="nt">&lt;/auth&gt;</span>
  <span class="nt">&lt;/endpoint&gt;</span>
<span class="nt">&lt;/schema&gt;</span>
</code></pre>
</div>

<p>In the above schema we are defining four attributes for the <code class="highlighter-rouge">post</code> and each attribute has a specific behaviour, also an endpoint is defined in order to access to the write, update or fetch operations.</p>

<p>The next step is upload the schema, so The Hover can parse and create the dynamic endpoint:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>curl -i -XPUT -H <span class="s2">"Ckey: YOUR-CKEY"</span> -d @schema_post.xml <span class="s2">"http://127.0.0.1:8099/v1/schema"</span>
</code></pre>
</div>

<p>If all goes ok the above request must respond with a 200 OK and then the dynamic endpoint is ready!!.</p>

<h4 id="operations"><strong><em>Operations</em></strong></h4>

<h5 id="storing">Storing</h5>
<p>Storing method run all validations for each attribute, ensuring that data passed all validations before be written into backend database.
To store an entity/object into the system using your custom defined schema (with the custom endpoint):</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>curl -i -XPOST -H <span class="s2">"Ckey: YOUR-CKEY"</span> -d <span class="s1">'{"_title": "Schemas", "_body": "Hello, I am using schemas", "_likes": 1, "_date": "2016-01-01"}'</span> <span class="s2">"http://127.0.0.1:8099/v1/post"</span>
</code></pre>
</div>

<h5 id="updating">Updating</h5>
<p>Updating method run almost all validations, except for required attributes since in a update the required attributes can be updated or not (not always).
To update an entity/object into the system using your custom defined schema (with the custom endpoint):</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>curl -i -XPUT -H <span class="s2">"Ckey: YOUR-CKEY"</span> -d <span class="s1">'{"_title": "My Schemas", "id": "POST-ID"}'</span> <span class="s2">"http://127.0.0.1:8099/v1/post"</span>
</code></pre>
</div>

<h5 id="fetching">Fetching</h5>
<p>To fetch info of an entity/object from the system using your custom defined schema (with the custom endpoint):</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>curl -i -XGET -H <span class="s2">"Ckey: YOUR-CKEY"</span> <span class="s2">"http://127.0.0.1:8099/v1/post?id=POST-ID"</span>
</code></pre>
</div>

<h4 id="future-implementations"><strong><em>Future Implementations</em></strong></h4>

<p>For future works more auth methods can be added to the dynamic endpoints.</p>


			</section>
		</section>
	

	
	
		<section class="doc-content">
			<section class="left-docs">
				<h3>
					<a id="apiobjects_add">
						/user
						
							<span class="endpoint post"></span>
						
					</a>
				</h3>
				
					<p class="description">Create object with custom data</p>
				

				<h6>Parameters</h6><dl>
  <dt>branch_id</dt>
  <dd>The branch id provided along with credentials</dd>
  <dt>profile_id</dt>
  <dd>The profile id provided along with credentials</dd>
</dl>

<p class="success">The object will automatically stored and indexed into datastore</p>

<p>Create an object into datastore.</p>

<div title="cURL" class="language-shell highlighter-rouge"><pre class="highlight"><code>curl -i -XPOST -H <span class="s2">"Ckey: YOUR_APP_CKEY"</span> -d <span class="s1">'{"branch_id": "asisiud8s", "profile_id": "asdiajd9s8d89s"}'</span> http://api.hurakann/v1/user
</code></pre>
</div>

<div title="Erlang" class="language-erlang highlighter-rouge"><pre class="highlight"><code><span class="nn">httpc</span><span class="p">:</span><span class="nf">request</span><span class="p">(</span><span class="n">post</span><span class="p">,</span> <span class="s">"http://api.hurakann.com"</span><span class="p">).</span>
</code></pre>
</div>

			</section>
		</section>
	


		</div>
		<!--<script>
			document.getElementById("open-nav").addEventListener("click", function () {
				document.body.classList.toggle("nav-open");
			});
		</script>-->
	</body>
</html>
